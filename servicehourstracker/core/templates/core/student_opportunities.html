{% load custom_filters %}
<h1>Opportunities</h1>
<a href="/student_dashboard">Dashboard</a>
<a href="/student_opportunities">Opportunities</a>
<a href="/student_calendar">Calendar</a>
<br/>
<br/>
<form method="get" action="{% url 'student_opportunities' %}">
    <input type="text" name="search" placeholder="Search events..." value="{{ request.GET.search }}">
    <label>
        <input type="checkbox" name="filter_conflicts" {% if filter_conflicts %}checked{% endif %}>
        Only show events Iâ€™m available for
    </label>
    <button type="submit">Search</button>
</form>
<br/>
{% if events %}
    {% for event in events %}
        <a href="/student_opportunities_details/{{ event.id }}"><div>{{ event.name }}</div></a>
        <div>{{ event.organizer.name }}</div>
        <div>{{ event.remaining_slots }}</div>
        {% if user_event_status|get_item:event.id %}
            <div>You already joined this event.</div>
        {% else %}
            <div>You have not joined this event.</div>
        {% endif %}
        {{ event.start_datetime }}
        {{ event.end_datetime }}
        {{ event.service_hours }}
        <br/>
        <br/>
    {% endfor %}
{% endif %}